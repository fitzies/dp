generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider  = "postgresql"
  url       = env("DATABASE_URL")
  // uncomment next line if you use Prisma <5.10
  // directUrl = env("DATABASE_URL_UNPOOLED")
}

enum DutyName {
  GUARD_DUTY
  COS
  DOS
  NOT_AVAILABLE
}

model User {
  id Int @id @default(autoincrement())
  userId String @unique @default(uuid())
  
  username String @unique
  password String
  points Int @default(0)

  teams Team[] @relation("UserTeams")

  admin Boolean
}

model Duty {
  id Int @id @default(autoincrement())
  date String
  userId String
  
  teamId Int
  name DutyName
  description String?

  points_awarded Int

  @@unique([date, teamId]) // Ensure that no two duties with the same teamId can be assigned on the same date

  userChangeId String?
}


model Team {
  id Int @id @default(autoincrement())
  name String
  members User[] @relation("UserTeams")

  admin String // User Id
}
